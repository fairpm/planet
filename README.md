# Planet!

This repository houses the code and configuration for our Planet instance.

This feed is displayed within the Dashboard to users by default, so should be full of items that are interesting to them.

## Website

The Planet site at `planet.fair.pm` is a static HTML site, generated by the Planet tool. The source for the Planet tool (including config) lives at https://github.com/fairpm/planet

The Planet tool is run via a scheduled task in the Kubernetes (k8s) cluster every 5 minutes. The static HTML is stored in an S3 bucket after generation, and Fastly routes the subdomain to that S3 bucket.

## Adding a feed

If you've got a feed which offers interesting news to users, we'd love to add it.

Feeds are stored in `config.ini`. Add a new feed and the name you'd like displayed (alphabetical please!), and submit a pull request.

All new feeds are approved by the TSC.

## Running locally

Planet generates static files into `/data/output`, and stores the cache in `/data/cache`.

We recommend running the generation via Docker:

```sh
# One-liner:
$Â docker run --rm -it -v "$PWD/data:/data" $(docker build -q .)

# Or, run it one by one:
$ docker build -t planet .
$ docker run --rm -it -v "$PWD/data:/data" planet
```

## Updating Planet

Updates to Planet happen similar to how we handle updates to the server.

1. Build the planet repo into a container - see https://github.com/fairpm/planet/blob/main/.github/workflows/build.yml - and get the hash
2. Update the container tag in the cron-planet Helmchart config
3. In jazz, apply the chart
```
cd helm/projects/site
bin/deploy production --interactive
```

## Credits

This Planet instance uses [Venus](https://www.intertwingly.net/code/venus/), a fork of the original Planet. Copyright Sam Ruby, Scott James Remnant, and Jeff Waugh. Used under the Python Software Foundation License (PSFL).

Some code based on the [Planet Python](https://github.com/python/planet) source code, used under the PSFL.

This repository is licensed under [the ISC License](./LICENSE). Copyright 2025 contributors.
